<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>TV Principle</title>
  <link href="css/basic.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
  <script>
  var JSONData = [];
  </script>
  <script src="lib/jquery_sub.js"></script>
  <script src="data/menu.js"></script>
  <script src="javascript/placeholders.min.js"></script>
  <script src="javascript/service/directives.js"></script>
  <script src="javascript/script.js"></script>
  <script src="javascript/search_action.js"></script>
  <script src="javascript/view/leftMenu.js"></script>
  <script src="javascript/service/services.js"></script>
  <script src="data/menu.js"></script>
  <script src="javascript/jquery.hashchange.js"></script>
  <!--[if lt IE 9]>
      <script src="javascript/html5shiv.js"></script>
  <![endif]-->
</head>

<body id="mainBody">
  <div class="contianer">
    <div class="headerPanel">
      <h1><a href="javascript:parent.parentLocationChg('creative-vision/lumi')"><img src="img/logo.png" alt=""></a></h1>
      <div class="topSearch">
        <form onsubmit="return showSearchResult()">
          <input type="text" id="search_text_id" class="search_text" placeholder="Search" />
          <div class="searchBut" onclick="showSearchResult()"></div>
        </form>
      </div>
      <div class="menuControlBox">
        <a href="" class="btn_ham"></a>
      </div>
    </div>
    <div class="leftPanel">
    </div>
    <div class="rightPanel">
      <iframe src="component/creative-vision/lumi.html" id="contentFrame" frameborder="0" onload="resizeIframe(this)"></iframe>
      <!--<iframe src="component/creative-vision/uxTheme.html" id="contentFrame" frameborder="0" onload="resizeIframe(this)" scrolling="no" style="overflow:hidden;"></iframe>-->
    </div>
  </div>
</body>
<script language="javascript" type="text/javascript">
function resizeIframe(obj) {
  // obj = document.getElementById("contentFrame");
  // var subContainer = obj.contentWindow.document.querySelector(".showCon");
  // var t = subContainer.getClientRects();
  // obj.style.height = parseInt(t[0].height, 10) + 50 + 'px';
  // var t = document.body.clientHeight;
  var obj = $("#contentFrame");
  var iframeHeight = $('.rightPanel').height();
  var htmlTop = $(".headerPanel").outerHeight();
  // console.log(iframeHegith, obj);
  $(".rightPanel").css("padding-top", htmlTop);
  $(obj).height(iframeHeight);
}
window.onresize = resizeIframe;

// $(window).hashchange(function(){
//   var hashString = location.hash;
//   $("iframe").attr("src", "component/" + hashString + ".html")
// })
// 현재 보는 페이지에서 해쉬가 변경되면 동작하는 이벤트.
$(window).on('hashchange', function() {
  var hashString = location.hash;
  // console.log(hashString, hashString.substring(1));
  // console.log(!!hashString);
  if (hashString && !hashString === '#') {
    hashString = hashString.substring(1);
    $("iframe").attr("src", "component/" + hashString + ".html")
  }
});

window.onload = function() {
  var hashString = location.hash;
  if (hashString) {
    hashString = hashString.substring(1);
    $("iframe").attr("src","component/"+hashString+".html")
  }
  Menu.render();
  $('.leftPanel > ul > li').addClass('depth1');
  $('.leftPanel > ul > li > ul > li').addClass('depth2');
  $('.leftPanel > ul > li > ul > li > ul > li').addClass('depth3');
  $('.leftPanel > ul > li > ul').hide();
  //초기 메뉴설정
  $('.leftPanel > ul > li:first-child > div').addClass('focus');
  $('.leftPanel > ul > li:first-child > ul').show();
  $('.leftPanel > ul > li:first-child > ul > li:first-child > div').addClass('current');

  $('#dep9_0').parent().after('<li class="lnbLineBreak"><div><span>COMMON PATTERNS</span></div></li>');
  $('#dep9_3').parent().after('<li class="lnbLineBreak"><div><span>APP PATTERNS</span></div></li>');

}

function parentLocationChg(url) {
  location.hash = url;
  $("iframe").attr("src", "component/" + url + ".html")
}
// window.onkeydown = function() {

//   var kcode = event.keyCode;
//   if (kcode == 8) {
//     location.hash = "";
//   }
// }
</script>

</html>
